# Noctem v0.9.X Implementation Plan
*Items not yet implemented from improvements.md*
## Overview
v0.9.0 wiki core is complete (ingestion, chunking, embeddings, retrieval, citations). This plan covers remaining work: wiki CLI, web improvements, v0.9.1 Digital Aristotle learning features, and deferred infrastructure items.
## 1. Wiki CLI Commands (v0.9.0 Completion)
**Status:** Core module functional; CLI deferred
**Estimate:** 2-3 hours
Add commands to `cli.py`:
* `noctem wiki ingest [file]` — Process all/specific files from `data/sources/`
* `noctem wiki search "query"` — Semantic search with top-K results
* `noctem wiki ask "question"` — Full Q&A with citations
* `noctem wiki sources [--trust N]` — List indexed sources
* `noctem wiki status` — Indexing stats (sources, chunks, last verified)
* `noctem wiki verify` — Check for changed source files
**Implementation:**
* Use existing `noctem/wiki/` module functions
* Follow existing CLI patterns (click groups)
* Return formatted output with citations
## 2. Web Dashboard Improvements (v0.6.1 Deferred)
**Status:** Monolithic dashboard; improvements documented but not built
**Estimate:** 10-14 hours total
### 2A. Page Architecture Refactor (4-6 hours)
Current: Single monolithic page
Target structure:
```warp-runnable-command
/                   → Dashboard (calendar, status, quick capture)
/management         → Priorities, overdue, AI suggestions, goals/projects
/audio              → Voice journals, transcriptions, playback
/maintenance        → System health, model registry, insights
/skills             → Skill management (exists)
/wiki               → Wiki search and browse
/settings           → Config, prompts, calendar upload
```
Implementation:
* Create shared base template with navigation sidebar
* Each page as separate Flask route + template
* Keyboard shortcuts (1-5 for pages)
### 2B. Butler Status Widget (2-3 hours)
Add real-time Butler status block above calendar:
* Contacts: X/5 remaining this week
* Next window: [datetime]
* Queue: N items pending
* [Summon Butler] [View Queue] buttons
Implementation: `/api/butler/status` endpoint + JS polling (30s)
### 2C. Cross-Device Chat Persistence (6-8 hours)
Current: localStorage (quick fix done)
Target: Full DB-backed sessions
* Store messages in `conversations` table (schema exists)
* Session_id tracking (cookie or localStorage)
* Load last N messages on page load
* Merge chat into "System Thinking" panel
## 3. Skill-Wiki Bridge (v0.8 Deferred)
**Status:** Skills and wiki both work independently; not connected
**Estimate:** 3-4 hours
Enable skills to query wiki as knowledge source:
* Add `wiki_context` field to skill execution input
* Skills can request "retrieve from wiki: [query]" in instructions
* Executor automatically fetches relevant chunks before running skill
* Citations from wiki appear in skill output
## 4. v0.9.1 — Digital Aristotle (Learning & Teaching)
**Depends on:** Wiki CLI complete
**Estimate:** 20-30 hours total
### 4A. Query Mode Enhancement (3-4 hours)
* Ask anything → answer grounded in wiki with inline citations
* "I don't know" when sources insufficient
* Confidence indicator based on source coverage
**Implementation:** Enhance `wiki/query.py` with confidence thresholds, better prompting
### 4B. Socratic Mode (6-8 hours)
System asks YOU questions:
* User selects a source/topic to study
* System generates questions from wiki chunks
* Challenges assumptions; uses wiki as ground truth
* Evaluates user answers against source material
**New files:** `noctem/learning/socratic.py`
### 4C. Review Mode — Spaced Repetition (6-8 hours)
SM-2 algorithm for concept review:
* `learning_items` table (concept, question, answer, ease_factor, interval_days, next_review)
* `review_sessions` table (quality 0-5, user_response, feedback)
* Butler prompts at optimal intervals
* Generate review questions from wiki chunks
**New files:** `noctem/learning/sm2.py`, `noctem/learning/review.py`
### 4D. Learning Progress (3-4 hours)
Track and surface:
* Concepts studied, review history
* Ease factors, mastery estimates
* Study streaks, review debt
**Implementation:** Add to web dashboard; `/learning` page
### 4E. Teaching Safeguards (2-3 hours)
* Detect shallow understanding (one-word answers, pattern matching)
* Require explanation before advancing difficulty
* Never hollow validation; honest feedback
**Implementation:** Response analysis in Socratic/Review modes
## 5. Deferred Infrastructure (v0.6.x)
**Status:** Documented but not implemented
### 5A. Project-as-Agent (4-6 hours)
Per-project LangGraph with:
* `thread_id` mapping to `project_id`
* Interrupts for human input
* SQLite checkpointer for pick-up/put-down
**Files:** `noctem/slow/project_agent.py`
**Dependencies:** LangGraph
### 5B. Task Dependencies DAG (3-4 hours)
Add to data model:
* `depends_on` field (JSON array of task IDs)
* Block task completion if dependencies incomplete
* Surface blockers in Butler updates
* Visualization in web dashboard
### 5C. Self-Diagnostics Dashboard (2-3 hours)
**Status:** CLI implemented; web deferred
Add `/diagnostics` web page:
* Execution log viewer
* Pattern detection results
* Model registry status
* Queue health metrics
## 6. Priority Order
| Priority | Item | Estimate | Depends On |
|----------|------|----------|------------|
| 1 | Wiki CLI Commands | 2-3h | — |
| 2 | Butler Status Widget | 2-3h | — |
| 3 | Page Architecture Refactor | 4-6h | — |
| 4 | Query Mode Enhancement | 3-4h | Wiki CLI |
| 5 | Skill-Wiki Bridge | 3-4h | Wiki CLI |
| 6 | Socratic Mode | 6-8h | Query Mode |
| 7 | Review Mode (SM-2) | 6-8h | Socratic |
| 8 | Learning Progress Dashboard | 3-4h | Review Mode |
| 9 | Task Dependencies DAG | 3-4h | — |
| 10 | Project-as-Agent | 4-6h | — |
| 11 | Cross-Device Chat | 6-8h | Page Arch |
| 12 | Self-Diagnostics Dashboard | 2-3h | Page Arch |
| 13 | Teaching Safeguards | 2-3h | Socratic + Review |
## 7. v1.0 — Advanced Automation & External Actions
**Depends on:** v0.9.X complete, project-as-agent mature
### 7A. Durable Workflows — Temporal (20-30 hours)
Migrate high-value automations from LangGraph to Temporal:
* Workflows with Activities for side effects
* Signals to pause for human input
* Timers to defer until scheduled contact
* Retries and idempotency by default
* Sagas pattern for compensation on partial progress
**Use cases:**
* Email drafting and sending (with human approval checkpoint)
* Calendar event creation
* Multi-step project automations
**Infrastructure:**
* Temporal server (self-hosted or Temporal Cloud)
* Python SDK integration
* Workflow definitions per automation type
### 7B. External Integrations (15-20 hours)
| Integration | Scope | Human Checkpoint |
|-------------|-------|------------------|
| Calendar write-back | Create/modify events from tasks | Always |
| Email drafting | Generate drafts, send on approval | Always |
| API calls | External services (configurable) | Configurable |
**Implementation:**
* Google Calendar API / CalDAV for calendar
* SMTP or Gmail API for email
* Generic HTTP client for external APIs
* All write operations require explicit approval
### 7C. Maintenance Protocol Phase 2-3 (8-12 hours)
**Phase 2:** Butler-delivered maintenance reports
* Automatic weekly report generation
* Actionable quick-replies (numbered options)
* Doesn't count against contact budget (or separate 1/week allowance)
**Phase 3:** Intelligent automation
* Model auto-switching based on task type performance
* Automatic threshold tuning from learned patterns
* Proactive model upgrades when better options available
### 7D. Optional Cloud Routing (6-8 hours)
Behind explicit consent:
* Route complex tasks to cloud models when local insufficient
* User opt-in per task type or complexity threshold
* Default remains local-only
* Clear indication when cloud is used
**Implementation:**
* OpenAI/Anthropic API integration
* Routing rules in model registry
* Cost tracking and budget limits
### 7E. Hardware — USB Bootable Linux Server (10-15 hours)
Self-contained Noctem appliance:
* Bootable USB with minimal Linux (Alpine or similar)
* Pre-configured Ollama + models
* Auto-start Noctem on boot
* Web dashboard accessible on local network
* Backup/restore to external storage
**Use case:** Dedicated always-on Noctem device without Windows dependency
## 8. Post-1.0 — Personal Skills
**Depends on:** v0.8 skills infrastructure + v0.7 logging + v0.9 wiki
Skills built on top of existing infrastructure for personal life domains.
### 8A. Habit Builder (8-10 hours)
* Track recurring behaviors with streaks
* Break recovery (don't lose all progress on one miss)
* Butler prompts at optimal times
* Pattern analysis over time (best days, failure triggers)
**Note:** Codebase has `habit_service.py`, `Habit`/`HabitLog` models, and tables from earlier development. Infrastructure exists but is deferred until skill system mature.
**Implementation:**
* Convert existing habit code to skill format
* Add streak visualization to dashboard
* Butler integration for prompts
### 8B. Fitness Tracking (6-8 hours)
* Log workouts (type, duration, intensity)
* Integrate with health data exports (Apple Health, Google Fit CSV)
* Surface trends and progress
* Wiki integration for storing routines/programs
**Implementation:**
* Fitness skill with workout logging
* Import parsers for common export formats
* Dashboard visualization
### 8C. Meal Planning (8-10 hours)
* Weekly meal prep suggestions based on preferences
* Grocery list generation from meal plan
* Recipe wiki integration (store and retrieve recipes)
* Nutritional awareness (optional calorie/macro tracking)
**Implementation:**
* Meal planning skill
* Recipe ingestion to wiki
* Grocery list export
### 8D. Finance Awareness (10-12 hours)
* Budget tracking (income, expenses, categories)
* Spending pattern alerts (unusual spending)
* Bill reminders via Butler
* CSV import from bank statements
**Implementation:**
* Finance skill
* Durable workflows (v1.0) for recurring bill checks
* Dashboard with spending visualization
### 8E. Reading List (4-6 hours)
* Track books/articles (to-read, reading, completed)
* Surface "time to read" suggestions in calendar gaps
* Wiki integration for notes/highlights
* Progress tracking (pages, chapters)
**Implementation:**
* Reading skill
* Integration with suggestion service (calendar gaps)
* Wiki for storing reading notes
## 9. V2.0 — Take Public
### 9A. Mobile Companion App (40-60 hours)
Lightweight app for quick capture + Butler notifications:
* iOS and/or Android (React Native or Flutter)
* Quick capture (voice and text)
* Butler notification delivery
* Task list view and completion
* Syncs with local Noctem instance
**Architecture considerations:**
* Local instance as backend (requires remote access via Tailscale or similar)
* Push notifications via Firebase or similar
* Offline capture with sync on reconnect
### 9B. Public Release Preparation (20-30 hours)
* Documentation cleanup and user guides
* Installation scripts for common platforms
* Docker containerization
* Security audit
* Demo/sandbox instance
* Community setup (GitHub discussions, Discord)
## 10. Full Roadmap Summary
| Version | Focus | Key Deliverables | Estimate |
|---------|-------|------------------|----------|
| 0.9.X | Wiki + Learning | CLI, Socratic mode, spaced repetition | 45-60h |
| 1.0 | Automation | Temporal workflows, external integrations | 60-85h |
| Post-1.0 | Personal | Habits, fitness, meals, finance, reading | 35-45h |
| 2.0 | Public | Mobile app, documentation, community | 60-90h |
**Total estimated development:** 200-280 hours
## 11. Guiding Principles (from North Star)
> "I never want to touch a computer again. This system should do it all for me while I am off engaging with life."
* **Zero-touch operation** — Every feature moves toward complete automation
* **Human-in-the-loop for risky actions** — Never send email or modify calendar without approval
* **Local-first, privacy-first** — Cloud routing only with explicit consent
* **Put down / pick up** — All work pausable, persisted, resumable after human input
* **Respectful attention** — Butler protocol caps outreach; never spam the user
